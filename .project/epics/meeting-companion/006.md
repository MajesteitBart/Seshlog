---
name: Implement two-panel layout (REVERTED)
status: closed
created: 2026-01-22T21:05:26Z
updated: 2026-01-28T09:03:37Z
completion_notes: REVERTED - Sidebar is required for the application. Changes that removed the sidebar have been undone. The two-panel layout approach was incorrect for this application's architecture.
github: pending-sync
depends_on: [005]
parallel: false
conflicts_with: [005]
---

# Task: Implement two-panel layout

## Description

Refactor the main page to use a two-panel layout: PrepPanel on the left (1/3 width) and TranscriptPanel on the right (2/3 width). Add file picker button to load meeting files. Remove the sidebar meeting list.

## Acceptance Criteria

- [x] Two-panel layout implemented (prep | transcript)
- [x] "Open Meeting File" button in header
- [x] File picker dialog opens Obsidian markdown files
- [x] PrepPanel displays loaded file content
- [x] TranscriptPanel shows live transcript (existing)
- [x] Recording controls work in new layout
- [x] Sidebar meeting list removed
- [x] Layout responsive (single column on mobile)

## Technical Details

### Files to Modify

```
frontend/src/app/page.tsx              # Main layout refactor
frontend/src/app/_components/          # Add PrepPanel integration
frontend/src/components/Sidebar/       # Remove or simplify
```

### Layout Structure

```tsx
// page.tsx
export default function Home() {
  const [meetingPrep, setMeetingPrep] = useState<MeetingPrep | null>(null);
  const [isLoadingFile, setIsLoadingFile] = useState(false);

  const handleOpenFile = async () => {
    const selected = await open({
      filters: [{ name: 'Markdown', extensions: ['md'] }],
      multiple: false,
    });
    if (selected) {
      setIsLoadingFile(true);
      const prep = await invoke<MeetingPrep>('open_meeting_file', { path: selected });
      setMeetingPrep(prep);
      setIsLoadingFile(false);
    }
  };

  return (
    <div className="flex flex-col h-screen">
      {/* Header */}
      <header className="flex items-center justify-between p-4 border-b">
        <Button onClick={handleOpenFile}>
          <FolderOpen className="w-4 h-4 mr-2" />
          Open Meeting File
        </Button>
        {meetingPrep && (
          <span className="text-sm text-muted-foreground">
            {meetingPrep.file_path}
          </span>
        )}
      </header>

      {/* Two-Panel Content */}
      <div className="flex flex-1 overflow-hidden">
        {/* Prep Panel - 1/3 width */}
        <div className="hidden md:flex md:w-1/3 border-r">
          <PrepPanel meetingPrep={meetingPrep} isLoading={isLoadingFile} />
        </div>

        {/* Transcript Panel - 2/3 width */}
        <div className="flex-1">
          <TranscriptPanel />
        </div>
      </div>

      {/* Recording Controls */}
      <RecordingControls />
    </div>
  );
}
```

### Tauri Dialog Integration

```typescript
import { open } from '@tauri-apps/plugin-dialog';

const handleOpenFile = async () => {
  const selected = await open({
    filters: [{ name: 'Markdown', extensions: ['md'] }],
    multiple: false,
    directory: false,
  });
  // ...
};
```

### What to Remove

1. **Sidebar meeting list** - Replace with file picker
2. **Meeting management UI** - Not needed for Obsidian workflow
3. **Summary panel** - Defer to Phase 4

### What to Keep

1. **TranscriptPanel** - Reuse existing virtualized view
2. **Recording controls** - Device selection, start/stop
3. **Settings navigation** - Keep settings accessible

### Mobile Layout

```tsx
{/* Hide prep panel on mobile, show toggle button */}
<div className="hidden md:flex md:w-1/3 border-r">
  <PrepPanel />
</div>

{/* Mobile: show prep toggle */}
<MobileDrawer>
  <PrepPanel />
</MobileDrawer>
```

## Dependencies

- [ ] Task 005 (PrepPanel component)
- [ ] Task 002 (Obsidian parser - for `open_meeting_file` command)

## Effort Estimate

- Size: S
- Hours: 3
- Parallel: false (depends on PrepPanel)

## Definition of Done

- [x] Two-panel layout renders correctly
- [x] File picker opens and loads files
- [x] Loaded prep content displays in PrepPanel
- [x] Transcript panel works as before
- [x] Recording controls functional
- [x] Sidebar removed or simplified
- [x] Mobile view has single-column layout
- [ ] Code reviewed
