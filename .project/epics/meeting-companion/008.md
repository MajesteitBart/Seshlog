---
name: End-to-end testing
status: closed
created: 2026-01-22T21:05:26Z
updated: 2026-01-28T18:07:45Z
github: pending-sync
depends_on: [001, 002, 003, 004, 005, 006, 007]
parallel: false
conflicts_with: []
---

# Task: End-to-end testing

## Description

Validate the complete Meeting Companion workflow: load meeting prep file → record with Deepgram transcription → save transcript back to Obsidian file. Test both happy path and error scenarios.

## Acceptance Criteria

- [ ] Full workflow tested: load → record → save
- [ ] Deepgram transcription works with real audio
- [ ] Speaker diarization produces speaker labels
- [ ] Whisper fallback works when offline
- [ ] File save preserves original content
- [ ] Error scenarios handled gracefully
- [ ] Performance acceptable (latency, memory)

## Technical Details

### Test Scenarios

#### Happy Path Tests

| # | Scenario | Steps | Expected |
|---|----------|-------|----------|
| 1 | Load meeting file | Open file picker, select .md | PrepPanel shows content |
| 2 | Start recording (Deepgram) | Click record, speak | Live transcript with speakers |
| 3 | Stop and save | Click stop, confirm | Transcript in original file |
| 4 | Verify saved file | Open in Obsidian | Prep + Transcript visible |

#### Error Scenario Tests

| # | Scenario | Steps | Expected |
|---|----------|-------|----------|
| 5 | No API key | Select Deepgram, no key, record | Error toast, suggest settings |
| 6 | Invalid API key | Enter wrong key, record | Connection error, suggest check key |
| 7 | Network failure | Disconnect during recording | Fallback to Whisper or error |
| 8 | Malformed file | Open invalid markdown | Graceful error, empty prep |
| 9 | File write failure | Read-only file | Error message, no data loss |

#### Performance Tests

| # | Metric | Target | Test Method |
|---|--------|--------|-------------|
| 10 | Transcription latency | < 500ms | Measure time from speech to text |
| 11 | Memory usage | < 500MB | Monitor during 30min recording |
| 12 | File parse time | < 100ms | Time large meeting file |

### Test Files

Create test meeting files:
```
tests/fixtures/
├── valid-meeting.md          # Full valid meeting prep
├── minimal-meeting.md        # Only frontmatter + title
├── no-frontmatter.md         # Missing YAML
├── malformed.md              # Invalid YAML
└── large-meeting.md          # Long content for perf test
```

### Test Checklist

```markdown
## Manual Test Checklist

### Setup
- [ ] App builds without errors
- [ ] App launches without backend
- [ ] Settings page loads

### Deepgram Provider
- [ ] API key saves correctly
- [ ] Provider selection persists
- [ ] Connection to Deepgram succeeds
- [ ] Audio streams without errors
- [ ] Transcript appears in real-time
- [ ] Speaker labels present (Speaker 1, Speaker 2)

### Whisper Fallback
- [ ] Switch to Whisper in settings
- [ ] Recording works offline
- [ ] Transcript quality acceptable

### Obsidian Integration
- [ ] File picker opens
- [ ] Valid file loads correctly
- [ ] PrepPanel displays Goals/Agenda/Context
- [ ] Frontmatter parsed correctly
- [ ] Missing sections handled gracefully

### Save Workflow
- [ ] Stop recording saves transcript
- [ ] Original file content preserved
- [ ] Transcript section added/updated
- [ ] Status changed to "completed"
- [ ] File opens correctly in Obsidian

### Error Handling
- [ ] Missing API key shows error
- [ ] Network failure shows error
- [ ] Invalid file shows error
- [ ] Write failure shows error
- [ ] App doesn't crash on errors
```

### Bug Tracking

Document any bugs found:
```markdown
## Bugs Found

| # | Description | Severity | Status |
|---|-------------|----------|--------|
| 1 | Example bug | Medium | Open |
```

## Dependencies

- [ ] All previous tasks (001-007) completed
- [ ] Deepgram API key for testing
- [ ] Sample Obsidian meeting files

## Effort Estimate

- Size: M
- Hours: 4
- Parallel: false (integration task, depends on all others)

## Definition of Done

- [ ] All happy path scenarios pass
- [ ] All error scenarios handled gracefully
- [ ] Performance targets met
- [ ] No critical bugs remaining
- [ ] Test documentation complete
- [ ] Ready for daily use
